package idp2p:id@0.1.0;

interface command {
  variant id-operation {
    add-assertion-key(list<u8>),
    remove-assertion-key(cid),
    add-authentication-key(list<u8>),
    remove-authentication-key(cid),
    add-agreement-key(list<u8>),
    remove-agreement-key(cid)
  }

  record id-inception-input {
    state: list<u8> // state
  }

  record id-event-input {
    state: id-state,
    new-state: cid,
    new-signers: option<list<cid>>,
    new-m-of-n: option<id-multi-sig>,
  }

  record id-create-result {
    inception: id-inception,
    signers: list<id-key>,
  }

  record id-create-event-result {
    event: id-event,
    signers: option<list<id-key>>,
  }

  create: func(input: id-inception-input) -> result<id-create-result, string>;

  create-event: func(input: id-event-input) -> result<id-create-event-result, string>;
}